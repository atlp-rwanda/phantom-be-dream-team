{"/Users/andela/Desktop/phantom-be-dream-team/src/app.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/app.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":55}},"4":{"start":{"line":12,"column":24},"end":{"line":12,"column":77}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":58}},"6":{"start":{"line":16,"column":12},"end":{"line":16,"column":51}},"7":{"start":{"line":18,"column":15},"end":{"line":18,"column":57}},"8":{"start":{"line":20,"column":24},"end":{"line":20,"column":77}},"9":{"start":{"line":22,"column":29},"end":{"line":22,"column":87}},"10":{"start":{"line":24,"column":20},"end":{"line":24,"column":68}},"11":{"start":{"line":26,"column":22},"end":{"line":26,"column":80}},"12":{"start":{"line":28,"column":21},"end":{"line":28,"column":78}},"13":{"start":{"line":30,"column":39},"end":{"line":30,"column":93}},"14":{"start":{"line":32,"column":0},"end":{"line":37,"column":3}},"15":{"start":{"line":39,"column":15},"end":{"line":39,"column":38}},"16":{"start":{"line":40,"column":0},"end":{"line":40,"column":68}},"17":{"start":{"line":41,"column":0},"end":{"line":41,"column":36}},"18":{"start":{"line":42,"column":0},"end":{"line":47,"column":3}},"19":{"start":{"line":43,"column":2},"end":{"line":46,"column":5}},"20":{"start":{"line":48,"column":0},"end":{"line":48,"column":40}},"21":{"start":{"line":49,"column":0},"end":{"line":49,"column":33}},"22":{"start":{"line":50,"column":0},"end":{"line":50,"column":41}},"23":{"start":{"line":51,"column":0},"end":{"line":53,"column":4}},"24":{"start":{"line":54,"column":0},"end":{"line":54,"column":36}},"25":{"start":{"line":55,"column":0},"end":{"line":55,"column":35}},"26":{"start":{"line":56,"column":15},"end":{"line":56,"column":21}},"27":{"start":{"line":57,"column":0},"end":{"line":57,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":31}},"loc":{"start":{"line":30,"column":37},"end":{"line":30,"column":95}},"line":30},"1":{"name":"(anonymous_1)","decl":{"start":{"line":42,"column":16},"end":{"line":42,"column":17}},"loc":{"start":{"line":42,"column":30},"end":{"line":47,"column":1}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":46},"end":{"line":30,"column":92}},"type":"cond-expr","locations":[{"start":{"line":30,"column":70},"end":{"line":30,"column":73}},{"start":{"line":30,"column":76},"end":{"line":30,"column":92}}],"line":30},"1":{"loc":{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},"type":"binary-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":49}},{"start":{"line":30,"column":53},"end":{"line":30,"column":67}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":11,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1},"f":{"0":11,"1":0},"b":{"0":[3,8],"1":[11,11]},"inputSourceMap":{"version":3,"names":["i18next","use","Backend","middleware","LanguageDetector","init","fallbackLng","backend","loadPath","server","express","handle","json","get","req","res","status","success","t","message","morgan","cors","cookieParser","swaggerUi","serve","setup","swaggerDoc","explorer","forgotPasssword","resetPassword"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/","sources":["app.js"],"sourcesContent":["import express from 'express'\nimport morgan from \"morgan\";\nimport swaggerUi from \"swagger-ui-express\";\nimport swaggerDoc from \"./data.json\";\nimport cors from \"cors\";\nimport i18next from 'i18next';\nimport Backend from 'i18next-fs-backend';\nimport middleware from 'i18next-http-middleware';\nimport cookieParser from 'cookie-parser';\n\nimport forgotPasssword from \"./routes/forgotPassword\";\nimport resetPassword from \"./routes/resetPassword\"\n\ni18next\n  .use(Backend)\n  .use(middleware.LanguageDetector)\n  .init({\n    fallbackLng: \"en\",\n    backend: {\n      loadPath: \"./locales/{{lng}}/translation.json\",\n    },\n  });\n\nconst server=express();\nserver.use(middleware.handle(i18next));\nserver.use(express.json());\n\nserver.get(\"/\", (req, res) => {\n  res.status(200).json({\n    success: req.t('success'),\n    message: req.t('message'),\n  });\n});\n\nserver.use(morgan(\"dev\"));\nserver.use(cors());\nserver.use(cookieParser())\n\nserver.use(\"/api-docs\", swaggerUi.serve, swaggerUi.setup(swaggerDoc, { explorer: true }));\n\nserver.use(forgotPasssword)\nserver.use(resetPassword)\n\nexport default server;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAEAA,gBAAA,CACGC,GADH,CACOC,yBADP,EAEGD,GAFH,CAEOE,8BAAA,CAAWC,gBAFlB,EAGGC,IAHH,CAGQ;EACJC,WAAW,EAAE,IADT;EAEJC,OAAO,EAAE;IACPC,QAAQ,EAAE;EADH;AAFL,CAHR;;AAUA,MAAMC,MAAM,GAAC,IAAAC,gBAAA,GAAb;AACAD,MAAM,CAACR,GAAP,CAAWE,8BAAA,CAAWQ,MAAX,CAAkBX,gBAAlB,CAAX;AACAS,MAAM,CAACR,GAAP,CAAWS,gBAAA,CAAQE,IAAR,EAAX;AAEAH,MAAM,CAACI,GAAP,CAAW,GAAX,EAAgB,CAACC,GAAD,EAAMC,GAAN,KAAc;EAC5BA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;IACnBK,OAAO,EAAEH,GAAG,CAACI,CAAJ,CAAM,SAAN,CADU;IAEnBC,OAAO,EAAEL,GAAG,CAACI,CAAJ,CAAM,SAAN;EAFU,CAArB;AAID,CALD;AAOAT,MAAM,CAACR,GAAP,CAAW,IAAAmB,eAAA,EAAO,KAAP,CAAX;AACAX,MAAM,CAACR,GAAP,CAAW,IAAAoB,aAAA,GAAX;AACAZ,MAAM,CAACR,GAAP,CAAW,IAAAqB,qBAAA,GAAX;AAEAb,MAAM,CAACR,GAAP,CAAW,WAAX,EAAwBsB,yBAAA,CAAUC,KAAlC,EAAyCD,yBAAA,CAAUE,KAAV,CAAgBC,aAAhB,EAA4B;EAAEC,QAAQ,EAAE;AAAZ,CAA5B,CAAzC;AAEAlB,MAAM,CAACR,GAAP,CAAW2B,uBAAX;AACAnB,MAAM,CAACR,GAAP,CAAW4B,sBAAX;eAEepB,M"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"085a7b75a405cc96b85cb353c5ed75dea03c0d9c","contentHash":"9f80df135f4cdde264ba9aaccc9f9965a08f1c6f31e8c704fe4a6060c0351bfb"},"/Users/andela/Desktop/phantom-be-dream-team/src/routes/forgotPassword.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/routes/forgotPassword.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":22},"end":{"line":10,"column":86}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":14,"column":15},"end":{"line":14,"column":40}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":63}},"7":{"start":{"line":17,"column":15},"end":{"line":17,"column":21}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":1,"6":1,"7":1,"8":1},"f":{"0":2},"b":{"0":[1,1],"1":[2,2]},"inputSourceMap":{"version":3,"names":["router","express","Router","post","forgotPassword"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/routes/","sources":["forgotPassword.js"],"sourcesContent":["import express from \"express\";\nimport forgotPassword from \"../controllers/forgotPassword\";\n\nconst router = express.Router()\nrouter.post(\"/api/v1/forgotpassword\", forgotPassword)\n\n\nexport default router\n"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,gBAAA,CAAQC,MAAR,EAAf;;AACAF,MAAM,CAACG,IAAP,CAAY,wBAAZ,EAAsCC,uBAAtC;eAGeJ,M"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"027c862c08ff9acdc9ccfe90df1aa346cb546fc4","contentHash":"2dd5d2ec12aa32a17a4b4d2c5c437998724eebbd0914c73dd01b985779640348"},"/Users/andela/Desktop/phantom-be-dream-team/src/controllers/forgotPassword.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/controllers/forgotPassword.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":20},"end":{"line":8,"column":67}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":63}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":58}},"5":{"start":{"line":14,"column":0},"end":{"line":14,"column":25}},"6":{"start":{"line":16,"column":39},"end":{"line":16,"column":93}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":33}},"8":{"start":{"line":20,"column":20},"end":{"line":29,"column":2}},"9":{"start":{"line":31,"column":23},"end":{"line":72,"column":1}},"10":{"start":{"line":34,"column":6},"end":{"line":34,"column":14}},"11":{"start":{"line":35,"column":2},"end":{"line":71,"column":5}},"12":{"start":{"line":40,"column":4},"end":{"line":68,"column":5}},"13":{"start":{"line":41,"column":25},"end":{"line":45,"column":8}},"14":{"start":{"line":47,"column":6},"end":{"line":50,"column":9}},"15":{"start":{"line":51,"column":18},"end":{"line":51,"column":38}},"16":{"start":{"line":52,"column":6},"end":{"line":59,"column":9}},"17":{"start":{"line":60,"column":6},"end":{"line":62,"column":9}},"18":{"start":{"line":64,"column":6},"end":{"line":67,"column":9}},"19":{"start":{"line":70,"column":4},"end":{"line":70,"column":31}},"20":{"start":{"line":74,"column":15},"end":{"line":74,"column":29}},"21":{"start":{"line":75,"column":0},"end":{"line":75,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":37},"end":{"line":16,"column":95}},"line":16},"1":{"name":"(anonymous_1)","decl":{"start":{"line":31,"column":23},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":37},"end":{"line":72,"column":1}},"line":31},"2":{"name":"(anonymous_2)","decl":{"start":{"line":39,"column":10},"end":{"line":39,"column":11}},"loc":{"start":{"line":39,"column":18},"end":{"line":69,"column":3}},"line":39},"3":{"name":"(anonymous_3)","decl":{"start":{"line":69,"column":11},"end":{"line":69,"column":12}},"loc":{"start":{"line":69,"column":20},"end":{"line":71,"column":3}},"line":69}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":92}},"type":"cond-expr","locations":[{"start":{"line":16,"column":70},"end":{"line":16,"column":73}},{"start":{"line":16,"column":76},"end":{"line":16,"column":92}}],"line":16},"1":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":67}},"type":"binary-expr","locations":[{"start":{"line":16,"column":46},"end":{"line":16,"column":49}},{"start":{"line":16,"column":53},"end":{"line":16,"column":67}}],"line":16},"2":{"loc":{"start":{"line":40,"column":4},"end":{"line":68,"column":5}},"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":68,"column":5}},{"start":{"line":40,"column":4},"end":{"line":68,"column":5}}],"line":40}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":1,"8":1,"9":1,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1,"21":1},"f":{"0":3,"1":2,"2":2,"3":0},"b":{"0":[1,2],"1":[3,3],"2":[1,1]},"inputSourceMap":{"version":3,"names":["User","model","transporter","nodemailer","createTransport","service","host","process","env","TRANSPORTER_HOST","port","TRANSPORTER_PORT","secure","SECURE","auth","user","USER_EMAIL","pass","USER_EMAIL_PASSWORD","forgotPassword","req","res","email","body","findOne","where","then","resetToken","jwt","sign","RESET_PASSWORD_SECRET","expiresIn","RESET_EXPIRE_TIME","cookie","httpOnly","url","URL","sendMail","from","to","subject","html","status","json","message","t","error","catch","console","log"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/controllers/","sources":["forgotPassword.js"],"sourcesContent":["import  jwt from \"jsonwebtoken\";\nimport nodemailer from \"nodemailer\";\nimport model from \"../models\";\nimport \"dotenv/config\" \n\nconst User = model.User\nconst transporter = nodemailer.createTransport({\n    service: \"gmail\",\n    host: process.env.TRANSPORTER_HOST,\n    port: process.env.TRANSPORTER_PORT,\n    secure: process.env.SECURE,\n    auth: {\n      user: process.env.USER_EMAIL,\n      pass: process.env.USER_EMAIL_PASSWORD,\n    },\n\n})\n\nconst forgotPassword = (req,res) => {\n    const {email} = req.body\n\n    User.findOne({\n        where: {\n            email         \n        }\n    })\n    .then(user =>{\n        if(user) {\n            const resetToken = jwt.sign({user}, process.env.RESET_PASSWORD_SECRET, {\n                expiresIn : process.env.RESET_EXPIRE_TIME\n            })\n            res.cookie(\"jwt\", resetToken, {\n                httpOnly : true,\n                expiresIn : process.env.RESET_EXPIRE_TIME\n            })\n            const url = `${process.env.URL}`\n            transporter.sendMail({\n                from : process.env.USER_EMAIL,\n                to : email,\n                subject : \"reset your password\",\n                html : `<h1>Please find below your token to reset your password</h1>\n                <p>${resetToken}</p>\n                `\n            })\n            res.status(200).json({\n                message : req.t('verificationEmail')\n            })\n        }\n        else {\n            res.status(400).json({\n                message : req.t('verificationEmailFailed'),\n                error: `The email ${email} wasn't found`\n            })\n        }\n    })\n    .catch(error =>{\n        console.log(error.message)\n    })\n}\n\nexport default forgotPassword"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,IAAI,GAAGC,eAAA,CAAMD,IAAnB;;AACA,MAAME,WAAW,GAAGC,mBAAA,CAAWC,eAAX,CAA2B;EAC3CC,OAAO,EAAE,OADkC;EAE3CC,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBAFyB;EAG3CC,IAAI,EAAEH,OAAO,CAACC,GAAR,CAAYG,gBAHyB;EAI3CC,MAAM,EAAEL,OAAO,CAACC,GAAR,CAAYK,MAJuB;EAK3CC,IAAI,EAAE;IACJC,IAAI,EAAER,OAAO,CAACC,GAAR,CAAYQ,UADd;IAEJC,IAAI,EAAEV,OAAO,CAACC,GAAR,CAAYU;EAFd;AALqC,CAA3B,CAApB;;AAYA,MAAMC,cAAc,GAAG,CAACC,GAAD,EAAKC,GAAL,KAAa;EAChC,MAAM;IAACC;EAAD,IAAUF,GAAG,CAACG,IAApB;EAEAvB,IAAI,CAACwB,OAAL,CAAa;IACTC,KAAK,EAAE;MACHH;IADG;EADE,CAAb,EAKCI,IALD,CAKMX,IAAI,IAAG;IACT,IAAGA,IAAH,EAAS;MACL,MAAMY,UAAU,GAAGC,qBAAA,CAAIC,IAAJ,CAAS;QAACd;MAAD,CAAT,EAAiBR,OAAO,CAACC,GAAR,CAAYsB,qBAA7B,EAAoD;QACnEC,SAAS,EAAGxB,OAAO,CAACC,GAAR,CAAYwB;MAD2C,CAApD,CAAnB;;MAGAX,GAAG,CAACY,MAAJ,CAAW,KAAX,EAAkBN,UAAlB,EAA8B;QAC1BO,QAAQ,EAAG,IADe;QAE1BH,SAAS,EAAGxB,OAAO,CAACC,GAAR,CAAYwB;MAFE,CAA9B;MAIA,MAAMG,GAAG,GAAI,GAAE5B,OAAO,CAACC,GAAR,CAAY4B,GAAI,EAA/B;MACAlC,WAAW,CAACmC,QAAZ,CAAqB;QACjBC,IAAI,EAAG/B,OAAO,CAACC,GAAR,CAAYQ,UADF;QAEjBuB,EAAE,EAAGjB,KAFY;QAGjBkB,OAAO,EAAG,qBAHO;QAIjBC,IAAI,EAAI;AACxB,qBAAqBd,UAAW;AAChC;MANiC,CAArB;MAQAN,GAAG,CAACqB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;QACjBC,OAAO,EAAGxB,GAAG,CAACyB,CAAJ,CAAM,mBAAN;MADO,CAArB;IAGH,CApBD,MAqBK;MACDxB,GAAG,CAACqB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;QACjBC,OAAO,EAAGxB,GAAG,CAACyB,CAAJ,CAAM,yBAAN,CADO;QAEjBC,KAAK,EAAG,aAAYxB,KAAM;MAFT,CAArB;IAIH;EACJ,CAjCD,EAkCCyB,KAlCD,CAkCOD,KAAK,IAAG;IACXE,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACF,OAAlB;EACH,CApCD;AAqCH,CAxCD;;eA0CezB,c"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d5b6c3a7f49509aec319b1dcd934952a58d2eadd","contentHash":"f2b3a16b9a63595568c34d6430da7ae2d12e3849fce2cd886075c528cf6e62d8"},"/Users/andela/Desktop/phantom-be-dream-team/src/models/index.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/models/index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":10},"end":{"line":8,"column":47}},"3":{"start":{"line":10,"column":12},"end":{"line":10,"column":51}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":61}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":65}},"6":{"start":{"line":16,"column":39},"end":{"line":16,"column":93}},"7":{"start":{"line":18,"column":17},"end":{"line":18,"column":51}},"8":{"start":{"line":20,"column":12},"end":{"line":20,"column":49}},"9":{"start":{"line":21,"column":15},"end":{"line":21,"column":35}},"10":{"start":{"line":22,"column":11},"end":{"line":22,"column":13}},"11":{"start":{"line":25,"column":0},"end":{"line":31,"column":1}},"12":{"start":{"line":26,"column":2},"end":{"line":28,"column":5}},"13":{"start":{"line":30,"column":2},"end":{"line":30,"column":96}},"14":{"start":{"line":33,"column":0},"end":{"line":37,"column":3}},"15":{"start":{"line":33,"column":50},"end":{"line":33,"column":122}},"16":{"start":{"line":34,"column":16},"end":{"line":34,"column":109}},"17":{"start":{"line":36,"column":2},"end":{"line":36,"column":25}},"18":{"start":{"line":39,"column":0},"end":{"line":43,"column":3}},"19":{"start":{"line":40,"column":2},"end":{"line":42,"column":3}},"20":{"start":{"line":41,"column":4},"end":{"line":41,"column":32}},"21":{"start":{"line":44,"column":0},"end":{"line":44,"column":25}},"22":{"start":{"line":45,"column":0},"end":{"line":45,"column":34}},"23":{"start":{"line":46,"column":0},"end":{"line":50,"column":3}},"24":{"start":{"line":47,"column":2},"end":{"line":47,"column":30}},"25":{"start":{"line":49,"column":2},"end":{"line":49,"column":43}},"26":{"start":{"line":51,"column":15},"end":{"line":51,"column":17}},"27":{"start":{"line":52,"column":0},"end":{"line":52,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":37},"end":{"line":16,"column":95}},"line":16},"1":{"name":"(anonymous_1)","decl":{"start":{"line":33,"column":42},"end":{"line":33,"column":43}},"loc":{"start":{"line":33,"column":50},"end":{"line":33,"column":122}},"line":33},"2":{"name":"(anonymous_2)","decl":{"start":{"line":33,"column":132},"end":{"line":33,"column":133}},"loc":{"start":{"line":33,"column":140},"end":{"line":37,"column":1}},"line":33},"3":{"name":"(anonymous_3)","decl":{"start":{"line":39,"column":24},"end":{"line":39,"column":25}},"loc":{"start":{"line":39,"column":37},"end":{"line":43,"column":1}},"line":39},"4":{"name":"(anonymous_4)","decl":{"start":{"line":46,"column":30},"end":{"line":46,"column":31}},"loc":{"start":{"line":46,"column":36},"end":{"line":48,"column":1}},"line":46},"5":{"name":"(anonymous_5)","decl":{"start":{"line":48,"column":9},"end":{"line":48,"column":10}},"loc":{"start":{"line":48,"column":16},"end":{"line":50,"column":1}},"line":48}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":92}},"type":"cond-expr","locations":[{"start":{"line":16,"column":70},"end":{"line":16,"column":73}},{"start":{"line":16,"column":76},"end":{"line":16,"column":92}}],"line":16},"1":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":67}},"type":"binary-expr","locations":[{"start":{"line":16,"column":46},"end":{"line":16,"column":49}},{"start":{"line":16,"column":53},"end":{"line":16,"column":67}}],"line":16},"2":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":49}},"type":"binary-expr","locations":[{"start":{"line":20,"column":12},"end":{"line":20,"column":32}},{"start":{"line":20,"column":36},"end":{"line":20,"column":49}}],"line":20},"3":{"loc":{"start":{"line":25,"column":0},"end":{"line":31,"column":1}},"type":"if","locations":[{"start":{"line":25,"column":0},"end":{"line":31,"column":1}},{"start":{"line":25,"column":0},"end":{"line":31,"column":1}}],"line":25},"4":{"loc":{"start":{"line":33,"column":50},"end":{"line":33,"column":122}},"type":"binary-expr","locations":[{"start":{"line":33,"column":50},"end":{"line":33,"column":73}},{"start":{"line":33,"column":77},"end":{"line":33,"column":94}},{"start":{"line":33,"column":98},"end":{"line":33,"column":122}}],"line":33},"5":{"loc":{"start":{"line":40,"column":2},"end":{"line":42,"column":3}},"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":42,"column":3}},{"start":{"line":40,"column":2},"end":{"line":42,"column":3}}],"line":40}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":4,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":2,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":0,"26":1,"27":1},"f":{"0":4,"1":2,"2":1,"3":1,"4":1,"5":0},"b":{"0":[0,4],"1":[4,4],"2":[1,1],"3":[1,0],"4":[2,2,1],"5":[1,0]},"inputSourceMap":{"version":3,"names":["basename","path","__filename","env","process","NODE_ENV","config","enVariables","db","sequelize","url","Sequelize","dialect","database","username","password","fs","readdirSync","__dirname","filter","file","indexOf","slice","forEach","model","require","join","default","DataTypes","name","Object","keys","modelName","associate","authenticate","then","console","log","catch","err","error"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/models/","sources":["index.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport Sequelize from 'sequelize';\nimport enVariables from '../config/config';\n\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = enVariables[env];\nconst db = {};\n\nlet sequelize;\nif (config.url) {\n  sequelize = new Sequelize(config.url, {\n    dialect:\"postgress\"\n  });\n} else {\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\n}\n\nfs\n  .readdirSync(__dirname)\n  .filter(file => (file.indexOf('.') !== 0) && (file !== basename) && (file.slice(-3) === '.js'))\n  .forEach(file => {\n    const model = require(path.join(__dirname, file)).default(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\n\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nsequelize\n.authenticate()  \n.then(() => {    console.log('DB connected') })  \n.catch((err) => {    console.error('Failed to connect!', err);  });\n\nexport default db;"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,QAAQ,GAAGC,aAAA,CAAKD,QAAL,CAAcE,UAAd,CAAjB;;AACA,MAAMC,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,QAAZ,IAAwB,aAApC;AACA,MAAMC,MAAM,GAAGC,eAAA,CAAYJ,GAAZ,CAAf;AACA,MAAMK,EAAE,GAAG,EAAX;AAEA,IAAIC,SAAJ;;AACA,IAAIH,MAAM,CAACI,GAAX,EAAgB;EACdD,SAAS,GAAG,IAAIE,kBAAJ,CAAcL,MAAM,CAACI,GAArB,EAA0B;IACpCE,OAAO,EAAC;EAD4B,CAA1B,CAAZ;AAGD,CAJD,MAIO;EACLH,SAAS,GAAG,IAAIE,kBAAJ,CAAcL,MAAM,CAACO,QAArB,EAA+BP,MAAM,CAACQ,QAAtC,EAAgDR,MAAM,CAACS,QAAvD,EAAiET,MAAjE,CAAZ;AACD;;AAEDU,WAAA,CACGC,WADH,CACeC,SADf,EAEGC,MAFH,CAEUC,IAAI,IAAKA,IAAI,CAACC,OAAL,CAAa,GAAb,MAAsB,CAAvB,IAA8BD,IAAI,KAAKpB,QAAvC,IAAqDoB,IAAI,CAACE,KAAL,CAAW,CAAC,CAAZ,MAAmB,KAF1F,EAGGC,OAHH,CAGWH,IAAI,IAAI;EACf,MAAMI,KAAK,GAAGC,OAAO,CAACxB,aAAA,CAAKyB,IAAL,CAAUR,SAAV,EAAqBE,IAArB,CAAD,CAAP,CAAoCO,OAApC,CAA4ClB,SAA5C,EAAuDE,kBAAA,CAAUiB,SAAjE,CAAd;;EACApB,EAAE,CAACgB,KAAK,CAACK,IAAP,CAAF,GAAiBL,KAAjB;AACD,CANH;;AAQAM,MAAM,CAACC,IAAP,CAAYvB,EAAZ,EAAgBe,OAAhB,CAAwBS,SAAS,IAAI;EACnC,IAAIxB,EAAE,CAACwB,SAAD,CAAF,CAAcC,SAAlB,EAA6B;IAC3BzB,EAAE,CAACwB,SAAD,CAAF,CAAcC,SAAd,CAAwBzB,EAAxB;EACD;AACF,CAJD;AAMAA,EAAE,CAACC,SAAH,GAAeA,SAAf;AACAD,EAAE,CAACG,SAAH,GAAeA,kBAAf;AAEAF,SAAS,CACRyB,YADD,GAECC,IAFD,CAEM,MAAM;EAAKC,OAAO,CAACC,GAAR,CAAY,cAAZ;AAA6B,CAF9C,EAGCC,KAHD,CAGQC,GAAD,IAAS;EAAKH,OAAO,CAACI,KAAR,CAAc,oBAAd,EAAoCD,GAApC;AAA4C,CAHjE;eAKe/B,E"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"13565a44af24e76cac1b9b72262c5d8f62345279","contentHash":"698d3125d64798151cbcaee598aca74a6d28ed26480988f9ee8332d41725d8cf"},"/Users/andela/Desktop/phantom-be-dream-team/src/config/config.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/config/config.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"1":{"start":{"line":5,"column":0},"end":{"line":18,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"inputSourceMap":{"version":3,"names":["require","config","module","exports","development","url","process","env","DEV_DATABASE_URL","dialect","test","TEST_DATABASE_URL","production","DATABASE_URL"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/config/","sources":["config.js"],"sourcesContent":["require('dotenv').config()\n\nmodule.exports = {\n  development: {\n    url: process.env.DEV_DATABASE_URL,\n    dialect: 'postgres',\n  },\n  test: {\n    url: process.env.TEST_DATABASE_URL,\n    dialect: 'postgres',\n  },\n  production: {\n    url: process.env.DATABASE_URL,\n    dialect: 'postgres',\n  },\n}"],"mappings":";;AAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AAEAC,MAAM,CAACC,OAAP,GAAiB;EACfC,WAAW,EAAE;IACXC,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADN;IAEXC,OAAO,EAAE;EAFE,CADE;EAKfC,IAAI,EAAE;IACJL,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYI,iBADb;IAEJF,OAAO,EAAE;EAFL,CALS;EASfG,UAAU,EAAE;IACVP,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYM,YADP;IAEVJ,OAAO,EAAE;EAFC;AATG,CAAjB"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"466d4667d342370ee3f412a777a9f19b50b0fb1e","contentHash":"8599d87712eea39f2d1b876171a34837a36f565aee3ef7ffea9745c6ecc2eb6a"},"/Users/andela/Desktop/phantom-be-dream-team/src/models/user.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/models/user.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":17},"end":{"line":8,"column":37}},"3":{"start":{"line":10,"column":54},"end":{"line":10,"column":73}},"4":{"start":{"line":10,"column":75},"end":{"line":10,"column":326}},"5":{"start":{"line":10,"column":125},"end":{"line":10,"column":161}},"6":{"start":{"line":10,"column":163},"end":{"line":10,"column":324}},"7":{"start":{"line":10,"column":224},"end":{"line":10,"column":287}},"8":{"start":{"line":10,"column":327},"end":{"line":10,"column":339}},"9":{"start":{"line":12,"column":33},"end":{"line":12,"column":489}},"10":{"start":{"line":12,"column":46},"end":{"line":12,"column":47}},"11":{"start":{"line":12,"column":91},"end":{"line":12,"column":131}},"12":{"start":{"line":12,"column":133},"end":{"line":12,"column":487}},"13":{"start":{"line":12,"column":194},"end":{"line":12,"column":236}},"14":{"start":{"line":12,"column":402},"end":{"line":12,"column":483}},"15":{"start":{"line":12,"column":490},"end":{"line":12,"column":504}},"16":{"start":{"line":14,"column":44},"end":{"line":14,"column":195}},"17":{"start":{"line":14,"column":62},"end":{"line":14,"column":166}},"18":{"start":{"line":14,"column":176},"end":{"line":14,"column":193}},"19":{"start":{"line":14,"column":196},"end":{"line":14,"column":207}},"20":{"start":{"line":16,"column":29},"end":{"line":16,"column":41}},"21":{"start":{"line":18,"column":15},"end":{"line":67,"column":1}},"22":{"start":{"line":21,"column":25},"end":{"line":21,"column":54}},"23":{"start":{"line":23,"column":6},"end":{"line":25,"column":7}},"24":{"start":{"line":24,"column":8},"end":{"line":24,"column":29}},"25":{"start":{"line":27,"column":6},"end":{"line":27,"column":24}},"26":{"start":{"line":35,"column":2},"end":{"line":65,"column":5}},"27":{"start":{"line":66,"column":2},"end":{"line":66,"column":14}},"28":{"start":{"line":69,"column":0},"end":{"line":69,"column":27}}},"fnMap":{"0":{"name":"ownKeys","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":16}},"loc":{"start":{"line":10,"column":41},"end":{"line":10,"column":341}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":207},"end":{"line":10,"column":208}},"loc":{"start":{"line":10,"column":222},"end":{"line":10,"column":289}},"line":10},"2":{"name":"_objectSpread","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":22}},"loc":{"start":{"line":12,"column":31},"end":{"line":12,"column":506}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":12,"column":177},"end":{"line":12,"column":178}},"loc":{"start":{"line":12,"column":192},"end":{"line":12,"column":238}},"line":12},"4":{"name":"(anonymous_4)","decl":{"start":{"line":12,"column":385},"end":{"line":12,"column":386}},"loc":{"start":{"line":12,"column":400},"end":{"line":12,"column":485}},"line":12},"5":{"name":"_defineProperty","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":24}},"loc":{"start":{"line":14,"column":42},"end":{"line":14,"column":209}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":18,"column":15},"end":{"line":18,"column":16}},"loc":{"start":{"line":18,"column":41},"end":{"line":67,"column":1}},"line":18},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":13},"end":{"line":28,"column":5}},"line":20},"8":{"name":"(anonymous_8)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":29},"end":{"line":30,"column":31}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":75},"end":{"line":10,"column":326}},"type":"if","locations":[{"start":{"line":10,"column":75},"end":{"line":10,"column":326}},{"start":{"line":10,"column":75},"end":{"line":10,"column":326}}],"line":10},"1":{"loc":{"start":{"line":10,"column":163},"end":{"line":10,"column":291}},"type":"binary-expr","locations":[{"start":{"line":10,"column":163},"end":{"line":10,"column":177}},{"start":{"line":10,"column":182},"end":{"line":10,"column":290}}],"line":10},"2":{"loc":{"start":{"line":12,"column":91},"end":{"line":12,"column":131}},"type":"cond-expr","locations":[{"start":{"line":12,"column":114},"end":{"line":12,"column":126}},{"start":{"line":12,"column":129},"end":{"line":12,"column":131}}],"line":12},"3":{"loc":{"start":{"line":12,"column":133},"end":{"line":12,"column":486}},"type":"cond-expr","locations":[{"start":{"line":12,"column":141},"end":{"line":12,"column":239}},{"start":{"line":12,"column":242},"end":{"line":12,"column":486}}],"line":12},"4":{"loc":{"start":{"line":12,"column":242},"end":{"line":12,"column":486}},"type":"cond-expr","locations":[{"start":{"line":12,"column":277},"end":{"line":12,"column":350}},{"start":{"line":12,"column":353},"end":{"line":12,"column":486}}],"line":12},"5":{"loc":{"start":{"line":14,"column":44},"end":{"line":14,"column":195}},"type":"if","locations":[{"start":{"line":14,"column":44},"end":{"line":14,"column":195}},{"start":{"line":14,"column":44},"end":{"line":14,"column":195}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":1,"9":1,"10":1,"11":1,"12":1,"13":10,"14":0,"15":1,"16":10,"17":0,"18":10,"19":10,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1},"f":{"0":1,"1":0,"2":1,"3":10,"4":0,"5":10,"6":1,"7":1,"8":1},"b":{"0":[1,0],"1":[1,1],"2":[1,0],"3":[1,0],"4":[0,0],"5":[0,10]},"inputSourceMap":{"version":3,"names":["PROTECTED_ATTRIBUTES","sequelize","DataTypes","User","Model","toJSON","attributes","get","a","associate","models","init","name","STRING","email","type","allowNull","args","msg","unique","validate","isEmail","phone","password","status","last_login_at","DATE","last_ip_address","modelName"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/models/","sources":["user.js"],"sourcesContent":["import { Model } from 'sequelize';\n\nconst PROTECTED_ATTRIBUTES = ['password'];\n\nexport default (sequelize, DataTypes) => {\n  class User extends Model {\n    toJSON() {\n      const attributes = { ...this.get() };\n      for (const a of PROTECTED_ATTRIBUTES) {\n        delete attributes[a];\n      }\n      return attributes;\n    }\n    static associate(models) {\n    }\n  };\n  User.init({\n    name: DataTypes.STRING,\n    email: {\n      type: DataTypes.STRING,\n      allowNull: {\n        args: false,\n        msg: 'Please enter your email address',\n      },\n      unique: {\n        args: true,\n        msg: 'Email already exists',\n      },\n      validate: {\n        isEmail: {\n          args: true,\n          msg: 'Please enter a valid email address',\n        },\n      },\n    },\n    phone: {\n      type: DataTypes.STRING,\n      unique: true,\n    },\n    password: DataTypes.STRING,\n    status: DataTypes.STRING,\n    last_login_at: DataTypes.DATE,\n    last_ip_address: DataTypes.STRING\n  }, {\n    sequelize,\n    modelName: 'User',\n  });\n  return User;\n};"],"mappings":";;;;;;;AAAA;;;;;;;;AAEA,MAAMA,oBAAoB,GAAG,CAAC,UAAD,CAA7B;;eAEe,CAACC,SAAD,EAAYC,SAAZ,KAA0B;EACvC,MAAMC,IAAN,SAAmBC,gBAAnB,CAAyB;IACvBC,MAAM,GAAG;MACP,MAAMC,UAAU,qBAAQ,KAAKC,GAAL,EAAR,CAAhB;;MACA,KAAK,MAAMC,CAAX,IAAgBR,oBAAhB,EAAsC;QACpC,OAAOM,UAAU,CAACE,CAAD,CAAjB;MACD;;MACD,OAAOF,UAAP;IACD;;IACe,OAATG,SAAS,CAACC,MAAD,EAAS,CACxB;;EATsB;;EAUxB;EACDP,IAAI,CAACQ,IAAL,CAAU;IACRC,IAAI,EAAEV,SAAS,CAACW,MADR;IAERC,KAAK,EAAE;MACLC,IAAI,EAAEb,SAAS,CAACW,MADX;MAELG,SAAS,EAAE;QACTC,IAAI,EAAE,KADG;QAETC,GAAG,EAAE;MAFI,CAFN;MAMLC,MAAM,EAAE;QACNF,IAAI,EAAE,IADA;QAENC,GAAG,EAAE;MAFC,CANH;MAULE,QAAQ,EAAE;QACRC,OAAO,EAAE;UACPJ,IAAI,EAAE,IADC;UAEPC,GAAG,EAAE;QAFE;MADD;IAVL,CAFC;IAmBRI,KAAK,EAAE;MACLP,IAAI,EAAEb,SAAS,CAACW,MADX;MAELM,MAAM,EAAE;IAFH,CAnBC;IAuBRI,QAAQ,EAAErB,SAAS,CAACW,MAvBZ;IAwBRW,MAAM,EAAEtB,SAAS,CAACW,MAxBV;IAyBRY,aAAa,EAAEvB,SAAS,CAACwB,IAzBjB;IA0BRC,eAAe,EAAEzB,SAAS,CAACW;EA1BnB,CAAV,EA2BG;IACDZ,SADC;IAED2B,SAAS,EAAE;EAFV,CA3BH;EA+BA,OAAOzB,IAAP;AACD,C"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9612f72dbbab081fdd31ac5a5c316b7ce1366122","contentHash":"2a08e3a53c897828b11387623180550bb47664139be02434cb6c814bcce5ddc0"},"/Users/andela/Desktop/phantom-be-dream-team/src/routes/resetPassword.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/routes/resetPassword.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":21},"end":{"line":10,"column":84}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":75}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":40}},"7":{"start":{"line":18,"column":0},"end":{"line":18,"column":80}},"8":{"start":{"line":19,"column":15},"end":{"line":19,"column":21}},"9":{"start":{"line":20,"column":0},"end":{"line":20,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":1,"7":1,"8":1,"9":1},"f":{"0":3},"b":{"0":[2,1],"1":[3,3]},"inputSourceMap":{"version":3,"names":["router","express","Router","post","resetAuth","resetPassword"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/routes/","sources":["resetPassword.js"],"sourcesContent":["import express from 'express'\nimport resetPassword from '../controllers/resetPassword'\nimport resetAuth from '../middleware/resetAuth'\n\nconst router = express.Router()\n\n\nrouter.post('/api/v1/reset/:token', resetAuth, resetPassword)\n\nexport default router"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAGC,gBAAA,CAAQC,MAAR,EAAf;;AAGAF,MAAM,CAACG,IAAP,CAAY,sBAAZ,EAAoCC,kBAApC,EAA+CC,sBAA/C;eAEeL,M"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dbaef3a840d20cb607cc197e7c633693a22897a0","contentHash":"b1476954fadc611eabdb88ffe5af98b32446e97ea5693987ea64c377d3b4134d"},"/Users/andela/Desktop/phantom-be-dream-team/src/controllers/resetPassword.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/controllers/resetPassword.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":55}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":58}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":13},"end":{"line":16,"column":33}},"7":{"start":{"line":18,"column":22},"end":{"line":56,"column":1}},"8":{"start":{"line":22,"column":6},"end":{"line":22,"column":14}},"9":{"start":{"line":24,"column":2},"end":{"line":55,"column":3}},"10":{"start":{"line":25,"column":4},"end":{"line":27,"column":7}},"11":{"start":{"line":31,"column":8},"end":{"line":31,"column":22}},"12":{"start":{"line":32,"column":17},"end":{"line":36,"column":6}},"13":{"start":{"line":38,"column":4},"end":{"line":54,"column":5}},"14":{"start":{"line":39,"column":6},"end":{"line":41,"column":9}},"15":{"start":{"line":42,"column":11},"end":{"line":54,"column":5}},"16":{"start":{"line":43,"column":19},"end":{"line":43,"column":52}},"17":{"start":{"line":44,"column":6},"end":{"line":44,"column":74}},"18":{"start":{"line":46,"column":6},"end":{"line":46,"column":18}},"19":{"start":{"line":47,"column":6},"end":{"line":49,"column":9}},"20":{"start":{"line":51,"column":6},"end":{"line":53,"column":9}},"21":{"start":{"line":58,"column":15},"end":{"line":58,"column":28}},"22":{"start":{"line":59,"column":0},"end":{"line":59,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":22},"end":{"line":18,"column":23}},"loc":{"start":{"line":18,"column":42},"end":{"line":56,"column":1}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14},"2":{"loc":{"start":{"line":24,"column":2},"end":{"line":55,"column":3}},"type":"if","locations":[{"start":{"line":24,"column":2},"end":{"line":55,"column":3}},{"start":{"line":24,"column":2},"end":{"line":55,"column":3}}],"line":24},"3":{"loc":{"start":{"line":38,"column":4},"end":{"line":54,"column":5}},"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":54,"column":5}},{"start":{"line":38,"column":4},"end":{"line":54,"column":5}}],"line":38},"4":{"loc":{"start":{"line":42,"column":11},"end":{"line":54,"column":5}},"type":"if","locations":[{"start":{"line":42,"column":11},"end":{"line":54,"column":5}},{"start":{"line":42,"column":11},"end":{"line":54,"column":5}}],"line":42}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":1,"8":4,"9":4,"10":1,"11":3,"12":3,"13":3,"14":2,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":1},"f":{"0":2,"1":4},"b":{"0":[1,1],"1":[2,2],"2":[1,3],"3":[2,1],"4":[1,0]},"inputSourceMap":{"version":3,"names":["User","model","resetPassword","req","res","password","comfirmPassword","body","status","json","message","t","email","user","findOne","where","salt","bcrypt","genSalt","hash","save"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/controllers/","sources":["resetPassword.js"],"sourcesContent":["import bcrypt from 'bcrypt'\nimport model from \"../models\";\nimport \"dotenv/config\" \n\nconst User = model.User\n\n// Reset password controller function\nconst resetPassword = async (req, res) => {\n  const { password, comfirmPassword } = req.body\n  if (password !== comfirmPassword) {\n    return res.status(401).json({\n      message: req.t('WrongPassword')\n    })\n  } else {\n    const { email } = await req.body\n    const user = await User.findOne({\n      where: {\n        email\n      }\n    })\n    if (!user) {\n      return res.status(404).json({\n        message: req.t('UserNotFound')\n      })\n    } else if (user) {\n      const salt = await bcrypt.genSalt(10)\n      user.password = await bcrypt.hash(req.body.password, salt)\n      // save user and the password\n      user.save()\n      res.status(200).json({\n        message: req.t('resetComfirmation')\n      })\n    } else {\n      res.status(404).json({\n        message: req.t('failedComfirmation')\n      })\n    }\n  }\n}\n\nexport default resetPassword"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,IAAI,GAAGC,eAAA,CAAMD,IAAnB,C,CAEA;;AACA,MAAME,aAAa,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;EACxC,MAAM;IAAEC,QAAF;IAAYC;EAAZ,IAAgCH,GAAG,CAACI,IAA1C;;EACA,IAAIF,QAAQ,KAAKC,eAAjB,EAAkC;IAChC,OAAOF,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MAC1BC,OAAO,EAAEP,GAAG,CAACQ,CAAJ,CAAM,eAAN;IADiB,CAArB,CAAP;EAGD,CAJD,MAIO;IACL,MAAM;MAAEC;IAAF,IAAY,MAAMT,GAAG,CAACI,IAA5B;IACA,MAAMM,IAAI,GAAG,MAAMb,IAAI,CAACc,OAAL,CAAa;MAC9BC,KAAK,EAAE;QACLH;MADK;IADuB,CAAb,CAAnB;;IAKA,IAAI,CAACC,IAAL,EAAW;MACT,OAAOT,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;QAC1BC,OAAO,EAAEP,GAAG,CAACQ,CAAJ,CAAM,cAAN;MADiB,CAArB,CAAP;IAGD,CAJD,MAIO,IAAIE,IAAJ,EAAU;MACf,MAAMG,IAAI,GAAG,MAAMC,eAAA,CAAOC,OAAP,CAAe,EAAf,CAAnB;MACAL,IAAI,CAACR,QAAL,GAAgB,MAAMY,eAAA,CAAOE,IAAP,CAAYhB,GAAG,CAACI,IAAJ,CAASF,QAArB,EAA+BW,IAA/B,CAAtB,CAFe,CAGf;;MACAH,IAAI,CAACO,IAAL;MACAhB,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;QACnBC,OAAO,EAAEP,GAAG,CAACQ,CAAJ,CAAM,mBAAN;MADU,CAArB;IAGD,CARM,MAQA;MACLP,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;QACnBC,OAAO,EAAEP,GAAG,CAACQ,CAAJ,CAAM,oBAAN;MADU,CAArB;IAGD;EACF;AACF,CA/BD;;eAiCeT,a"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"64f6dd149dfb6d4c6188c54ef4c8aec4e2b702a3","contentHash":"3cf17a70f0dc4e1217e3edfa33b7cc08ec8ec1e1ad15c86a5385034aa9ccd4f3"},"/Users/andela/Desktop/phantom-be-dream-team/src/middleware/resetAuth.js":{"path":"/Users/andela/Desktop/phantom-be-dream-team/src/middleware/resetAuth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":20},"end":{"line":8,"column":67}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":55}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":14,"column":0},"end":{"line":14,"column":25}},"6":{"start":{"line":16,"column":18},"end":{"line":36,"column":1}},"7":{"start":{"line":18,"column":21},"end":{"line":18,"column":37}},"8":{"start":{"line":20,"column":2},"end":{"line":35,"column":3}},"9":{"start":{"line":21,"column":4},"end":{"line":23,"column":7}},"10":{"start":{"line":25,"column":4},"end":{"line":34,"column":7}},"11":{"start":{"line":26,"column":6},"end":{"line":33,"column":7}},"12":{"start":{"line":27,"column":8},"end":{"line":27,"column":33}},"13":{"start":{"line":28,"column":8},"end":{"line":30,"column":11}},"14":{"start":{"line":32,"column":8},"end":{"line":32,"column":15}},"15":{"start":{"line":38,"column":15},"end":{"line":38,"column":24}},"16":{"start":{"line":39,"column":0},"end":{"line":39,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":18},"end":{"line":16,"column":19}},"loc":{"start":{"line":16,"column":38},"end":{"line":36,"column":1}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":80},"end":{"line":25,"column":81}},"loc":{"start":{"line":25,"column":103},"end":{"line":34,"column":5}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12},"2":{"loc":{"start":{"line":20,"column":2},"end":{"line":35,"column":3}},"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":35,"column":3}},{"start":{"line":20,"column":2},"end":{"line":35,"column":3}}],"line":20},"3":{"loc":{"start":{"line":26,"column":6},"end":{"line":33,"column":7}},"type":"if","locations":[{"start":{"line":26,"column":6},"end":{"line":33,"column":7}},{"start":{"line":26,"column":6},"end":{"line":33,"column":7}}],"line":26}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":1,"6":1,"7":4,"8":4,"9":0,"10":4,"11":4,"12":0,"13":0,"14":4,"15":1,"16":1},"f":{"0":2,"1":4,"2":4},"b":{"0":[0,2],"1":[2,2],"2":[0,4],"3":[0,4]},"inputSourceMap":{"version":3,"names":["dotenv","config","resetAuth","req","res","next","resetToken","params","token","status","json","message","jwt","verify","process","env","RESET_PASSWORD_SECRET","err","decodedToken","console","log"],"sourceRoot":"/Users/andela/Desktop/phantom-be-dream-team/src/middleware/","sources":["resetAuth.js"],"sourcesContent":["import jwt from 'jsonwebtoken'\nimport dotenv from 'dotenv'\n\ndotenv.config()\n\nconst resetAuth = (req, res, next) => {\n  // fetching token from req.params\n  const resetToken = req.params.token\n\n  // check jwt exists and is verified\n  if (!resetToken) {\n    res.status(404).json({\n      message: 'A valid token is required'\n    })\n  } else {\n    jwt.verify(resetToken, process.env.RESET_PASSWORD_SECRET, (err, decodedToken) => {\n      if (err) {\n        console.log(err.message)\n        res.status(404).json({\n          message: 'Invalid Token'\n        })\n      } else {\n        next()\n      }\n    })\n  }\n}\n\nexport default resetAuth"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEAA,eAAA,CAAOC,MAAP;;AAEA,MAAMC,SAAS,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;EACpC;EACA,MAAMC,UAAU,GAAGH,GAAG,CAACI,MAAJ,CAAWC,KAA9B,CAFoC,CAIpC;;EACA,IAAI,CAACF,UAAL,EAAiB;IACfF,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;MACnBC,OAAO,EAAE;IADU,CAArB;EAGD,CAJD,MAIO;IACLC,qBAAA,CAAIC,MAAJ,CAAWP,UAAX,EAAuBQ,OAAO,CAACC,GAAR,CAAYC,qBAAnC,EAA0D,CAACC,GAAD,EAAMC,YAAN,KAAuB;MAC/E,IAAID,GAAJ,EAAS;QACPE,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACN,OAAhB;QACAP,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;UACnBC,OAAO,EAAE;QADU,CAArB;MAGD,CALD,MAKO;QACLN,IAAI;MACL;IACF,CATD;EAUD;AACF,CArBD;;eAuBeH,S"},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2dd42bc6dc9b1a9b91cb42b91ae1bd712919057b","contentHash":"bdb25b53b21b1256f958442fda34a2450dac6fa4a526ee5ca2c0e4b5134f749e"}}